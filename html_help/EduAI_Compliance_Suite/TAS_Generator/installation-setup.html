<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Installation & Setup - TAS Generator | EduAI Compliance Suite</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <a href="index.html" class="navbar-brand">üìö TAS Generator</a>
            <ul class="navbar-nav">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="getting-started.html" class="nav-link">Getting Started</a></li>
                <li><a href="installation-setup.html" class="nav-link active">Installation</a></li>
                <li><a href="api-reference.html" class="nav-link">API Reference</a></li>
                <li><a href="ai-features.html" class="nav-link">AI Features</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1>Installation & Setup Guide</h1>
            <p>Complete guide to installing and configuring the TAS Generator system</p>
        </div>
    </section>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <ul class="sidebar-menu">
                <li><a href="#prerequisites">Prerequisites</a></li>
                <li><a href="#backend-setup">Backend Setup</a></li>
                <li><a href="#database-config">Database Configuration</a></li>
                <li><a href="#ai-services">AI Services Setup</a></li>
                <li><a href="#environment-vars">Environment Variables</a></li>
                <li><a href="#migrations">Run Migrations</a></li>
                <li><a href="#seed-data">Seed Data</a></li>
                <li><a href="#testing">Testing Setup</a></li>
                <li><a href="#docker">Docker Deployment</a></li>
                <li><a href="#troubleshooting">Troubleshooting</a></li>
            </ul>
        </aside>

        <!-- Content Area -->
        <main class="content">
            <!-- Prerequisites Section -->
            <section id="prerequisites">
                <h2>Prerequisites</h2>
                
                <div class="card">
                    <h3>System Requirements</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Component</th>
                                <th>Version</th>
                                <th>Purpose</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Python</td>
                                <td>3.12+</td>
                                <td>Backend runtime</td>
                            </tr>
                            <tr>
                                <td>PostgreSQL</td>
                                <td>16+</td>
                                <td>Primary database</td>
                            </tr>
                            <tr>
                                <td>Redis</td>
                                <td>7+</td>
                                <td>Caching & Celery broker</td>
                            </tr>
                            <tr>
                                <td>Docker</td>
                                <td>24+</td>
                                <td>Containerization (optional)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="card">
                    <h3>API Keys Required</h3>
                    <ul>
                        <li><strong>OpenAI API Key:</strong> For GPT-4 content generation (or alternative LLM provider)</li>
                        <li><strong>AWS Credentials:</strong> For S3 document storage (optional)</li>
                        <li><strong>Training.gov.au API:</strong> For qualification data (optional)</li>
                    </ul>
                </div>

                <div class="alert alert-warning">
                    <strong>‚ö†Ô∏è Important:</strong> Ensure you have appropriate API quotas for your OpenAI/LLM provider, as TAS generation can consume significant tokens.
                </div>
            </section>

            <!-- Backend Setup Section -->
            <section id="backend-setup">
                <h2>Backend Setup</h2>
                
                <div class="card">
                    <h3>1. Clone the Repository</h3>
                    <pre><code># Clone the repository
git clone https://github.com/your-org/rtocomply-ai-backend.git
cd rtocomply-ai-backend

# Navigate to control plane
cd apps/control-plane</code></pre>
                </div>

                <div class="card">
                    <h3>2. Create Virtual Environment</h3>
                    <pre><code># Create virtual environment
python3 -m venv venv

# Activate virtual environment
# On Linux/Mac:
source venv/bin/activate

# On Windows:
venv\Scripts\activate</code></pre>
                </div>

                <div class="card">
                    <h3>3. Install Dependencies</h3>
                    <pre><code># Install Python packages
pip install -r requirements.txt

# Key packages include:
# - Django 5.1+
# - djangorestframework
# - psycopg[binary] (PostgreSQL driver)
# - celery[redis] (task queue)
# - openai (GPT integration)
# - langchain (AI orchestration)
# - python-docx (document generation)
# - weasyprint (PDF generation)</code></pre>
                </div>

                <div class="alert alert-info">
                    <strong>üí° Tip:</strong> Create a separate virtual environment for development to avoid package conflicts.
                </div>
            </section>

            <!-- Database Configuration Section -->
            <section id="database-config">
                <h2>Database Configuration</h2>
                
                <div class="card">
                    <h3>PostgreSQL Setup</h3>
                    
                    <h4>Option 1: Local PostgreSQL</h4>
                    <pre><code># Install PostgreSQL (Ubuntu/Debian)
sudo apt-get update
sudo apt-get install postgresql postgresql-contrib

# Start PostgreSQL service
sudo systemctl start postgresql
sudo systemctl enable postgresql

# Create database and user
sudo -u postgres psql
CREATE DATABASE rto_tas_db;
CREATE USER rto_user WITH PASSWORD 'your_secure_password';
GRANT ALL PRIVILEGES ON DATABASE rto_tas_db TO rto_user;
\q</code></pre>

                    <h4>Option 2: Docker PostgreSQL</h4>
                    <pre><code># Using Docker Compose (recommended)
docker-compose up -d db

# Or run directly
docker run -d \
  --name postgres-tas \
  -e POSTGRES_DB=rto_tas_db \
  -e POSTGRES_USER=rto_user \
  -e POSTGRES_PASSWORD=your_secure_password \
  -p 5432:5432 \
  postgres:16</code></pre>
                </div>

                <div class="card">
                    <h3>Enable Required Extensions</h3>
                    <pre><code># Connect to database
psql -U rto_user -d rto_tas_db

# Enable extensions
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
CREATE EXTENSION IF NOT EXISTS "pg_trgm";  -- For text search
CREATE EXTENSION IF NOT EXISTS "vector";    -- For embeddings (pgvector)

\q</code></pre>
                </div>

                <div class="alert alert-warning">
                    <strong>‚ö†Ô∏è pgvector Extension:</strong> Required for AI similarity search. Install from <a href="https://github.com/pgvector/pgvector" target="_blank">pgvector GitHub</a> if not available.
                </div>
            </section>

            <!-- AI Services Setup Section -->
            <section id="ai-services">
                <h2>AI Services Setup</h2>
                
                <div class="card">
                    <h3>OpenAI Configuration</h3>
                    <pre><code># Get your API key from https://platform.openai.com/api-keys

# Test API connection
python -c "
from openai import OpenAI
client = OpenAI(api_key='your-api-key')
response = client.chat.completions.create(
    model='gpt-4o',
    messages=[{'role': 'user', 'content': 'Hello!'}]
)
print(response.choices[0].message.content)
"</code></pre>
                </div>

                <div class="card">
                    <h3>Alternative LLM Providers</h3>
                    <p>The system supports multiple AI providers:</p>
                    
                    <h4>Azure OpenAI</h4>
                    <pre><code># Environment variables
AZURE_OPENAI_API_KEY=your_azure_key
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_API_VERSION=2024-02-15-preview
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4</code></pre>

                    <h4>Anthropic Claude</h4>
                    <pre><code># Environment variables
ANTHROPIC_API_KEY=your_anthropic_key
DEFAULT_MODEL=claude-3-opus-20240229</code></pre>

                    <h4>Local LLM (Ollama)</h4>
                    <pre><code># Install Ollama
curl -fsSL https://ollama.com/install.sh | sh

# Pull models
ollama pull llama3
ollama pull mistral

# Configure
LLM_PROVIDER=ollama
OLLAMA_BASE_URL=http://localhost:11434</code></pre>
                </div>

                <div class="card">
                    <h3>Vector Database Setup (Optional)</h3>
                    <p>For enhanced RAG capabilities, you can use dedicated vector databases:</p>
                    
                    <h4>Pinecone</h4>
                    <pre><code>PINECONE_API_KEY=your_pinecone_key
PINECONE_ENVIRONMENT=us-east-1-aws
PINECONE_INDEX_NAME=tas-embeddings</code></pre>

                    <h4>Weaviate</h4>
                    <pre><code>WEAVIATE_URL=http://localhost:8080
WEAVIATE_API_KEY=your_key</code></pre>
                </div>
            </section>

            <!-- Environment Variables Section -->
            <section id="environment-vars">
                <h2>Environment Variables</h2>
                
                <div class="card">
                    <h3>Create .env File</h3>
                    <pre><code># Copy example file
cp .env.example .env

# Edit with your values
nano .env</code></pre>
                </div>

                <div class="card">
                    <h3>Required Configuration</h3>
                    <pre><code># Django Settings
DJANGO_SECRET_KEY=your_secret_key_here_min_50_chars
DJANGO_DEBUG=False
ALLOWED_HOSTS=localhost,127.0.0.1,your-domain.com
DEFAULT_FROM_EMAIL=noreply@yourdomain.com

# Database
DATABASE_URL=postgres://rto_user:password@localhost:5432/rto_tas_db

# Redis
REDIS_URL=redis://localhost:6379/0

# AI/LLM Configuration
MODEL_PROVIDER=openai  # or 'azure', 'anthropic', 'ollama'
OPENAI_API_KEY=sk-your-openai-api-key-here
DEFAULT_AI_MODEL=gpt-4o

# AWS (Optional - for document storage)
AWS_REGION=ap-southeast-2
AWS_ACCESS_KEY_ID=your_aws_key
AWS_SECRET_ACCESS_KEY=your_aws_secret
AWS_S3_BUCKET=rto-tas-documents

# Training.gov.au Integration (Optional)
TGA_API_KEY=your_tga_api_key
TGA_API_ENABLED=true

# Email Configuration (Optional)
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your_email@gmail.com
EMAIL_HOST_PASSWORD=your_app_password

# Celery Configuration
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# Security
CORS_ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com
CSRF_TRUSTED_ORIGINS=http://localhost:3000,https://yourdomain.com

# Logging
LOG_LEVEL=INFO
SENTRY_DSN=your_sentry_dsn  # Optional</code></pre>
                </div>

                <div class="alert alert-danger">
                    <strong>üîí Security Warning:</strong> Never commit your .env file to version control. Add it to .gitignore immediately.
                </div>
            </section>

            <!-- Migrations Section -->
            <section id="migrations">
                <h2>Run Database Migrations</h2>
                
                <div class="card">
                    <h3>Initial Migration</h3>
                    <pre><code># Navigate to control-plane directory
cd apps/control-plane

# Check for migration issues
python manage.py check

# Create migrations (if needed)
python manage.py makemigrations

# View migration plan
python manage.py showmigrations

# Run migrations
python manage.py migrate

# Expected output:
# Running migrations:
#   Applying contenttypes.0001_initial... OK
#   Applying auth.0001_initial... OK
#   Applying tenants.0001_initial... OK
#   Applying tas.0001_initial... OK
#   Applying tas.0002_tastemplate... OK
#   Applying tas.0003_tasversion... OK
#   Applying tas.0004_tasconversionsession... OK
#   ...</code></pre>
                </div>

                <div class="card">
                    <h3>Verify Database Tables</h3>
                    <pre><code># Connect to database
psql -U rto_user -d rto_tas_db

# List TAS tables
\dt tas_*

# Expected tables:
# tas_documents
# tas_templates
# tas_template_sections
# tas_template_section_assignments
# tas_versions
# tas_generation_logs
# tas_conversion_sessions

\q</code></pre>
                </div>

                <div class="card">
                    <h3>Create Superuser</h3>
                    <pre><code># Create Django admin user
python manage.py createsuperuser

# Follow prompts:
# Username: admin
# Email: admin@yourdomain.com
# Password: (enter secure password)</code></pre>
                </div>
            </section>

            <!-- Seed Data Section -->
            <section id="seed-data">
                <h2>Load Seed Data</h2>
                
                <div class="card">
                    <h3>Load ASQA Standards (2025)</h3>
                    <pre><code># Load 2025 ASQA Standards
python manage.py loaddata db/seeds/asqa_standards_2025.json

# Verify standards loaded
python manage.py shell
>>> from policy_comparator.models import ASQAStandard
>>> ASQAStandard.objects.count()
# Should return 25+ standards

>>> ASQAStandard.objects.filter(version='2025').count()
# Should return standards for 2025</code></pre>
                </div>

                <div class="card">
                    <h3>Load TAS Templates</h3>
                    <pre><code># Load default TAS templates
python manage.py loaddata tas/fixtures/default_templates.json

# Or create via admin:
# 1. Go to http://localhost:8000/admin/
# 2. Navigate to TAS > TAS Templates
# 3. Add template for each AQF level</code></pre>
                </div>

                <div class="card">
                    <h3>Create Demo Tenant</h3>
                    <pre><code># Run seed script
python manage.py shell < db/seeds/create_demo_tenant.py

# Or manually:
python manage.py shell
>>> from tenants.models import Tenant
>>> tenant = Tenant.objects.create(
...     name="Demo RTO",
...     slug="demo-rto",
...     rto_code="12345",
...     is_active=True
... )
>>> tenant.save()</code></pre>
                </div>

                <div class="alert alert-success">
                    <strong>‚úÖ Pro Tip:</strong> Use the demo data to test the system before integrating with your production data.
                </div>
            </section>

            <!-- Testing Section -->
            <section id="testing">
                <h2>Testing the Setup</h2>
                
                <div class="card">
                    <h3>Start Development Server</h3>
                    <pre><code># Start Django server
python manage.py runserver

# Server should start at http://127.0.0.1:8000/
# Access admin: http://127.0.0.1:8000/admin/</code></pre>
                </div>

                <div class="card">
                    <h3>Run Tests</h3>
                    <pre><code># Run all tests
python manage.py test

# Run TAS-specific tests
python manage.py test tas

# Run with coverage
pip install coverage
coverage run --source='.' manage.py test
coverage report
coverage html  # Generate HTML report</code></pre>
                </div>

                <div class="card">
                    <h3>Test API Endpoints</h3>
                    <pre><code># Test health check
curl http://localhost:8000/api/health/

# Test TAS generation (requires auth)
curl -X POST http://localhost:8000/api/tenants/demo-rto/tas/generate/ \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer your_token" \
  -d '{
    "qualification_code": "BSB50120",
    "qualification_title": "Diploma of Business",
    "delivery_mode": "blended",
    "duration_weeks": 52
  }'</code></pre>
                </div>

                <div class="card">
                    <h3>Start Celery Worker (Background Tasks)</h3>
                    <pre><code># In a new terminal
cd apps/control-plane
celery -A control_plane worker --loglevel=info

# Start Celery beat (for scheduled tasks)
celery -A control_plane beat --loglevel=info</code></pre>
                </div>
            </section>

            <!-- Docker Deployment Section -->
            <section id="docker">
                <h2>Docker Deployment</h2>
                
                <div class="card">
                    <h3>Using Docker Compose</h3>
                    <pre><code># Start all services
docker-compose up -d

# Services included:
# - db (PostgreSQL)
# - redis
# - control-plane (Django)
# - worker (Celery)
# - ai-gateway (optional)

# View logs
docker-compose logs -f control-plane

# Stop services
docker-compose down

# Rebuild after changes
docker-compose up -d --build</code></pre>
                </div>

                <div class="card">
                    <h3>Docker Compose Configuration</h3>
                    <pre><code># docker-compose.yml highlights
version: '3.8'

services:
  db:
    image: postgres:16
    environment:
      POSTGRES_DB: rto_tas_db
      POSTGRES_USER: rto_user
      POSTGRES_PASSWORD: ${DB_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"

  control-plane:
    build:
      context: ./apps/control-plane
    command: python manage.py runserver 0.0.0.0:8000
    volumes:
      - ./apps/control-plane:/app
    ports:
      - "8000:8000"
    depends_on:
      - db
      - redis
    env_file:
      - .env

  worker:
    build:
      context: ./apps/control-plane
    command: celery -A control_plane worker --loglevel=info
    volumes:
      - ./apps/control-plane:/app
    depends_on:
      - db
      - redis
    env_file:
      - .env

volumes:
  postgres_data:</code></pre>
                </div>

                <div class="card">
                    <h3>Production Considerations</h3>
                    <ul>
                        <li>Use Gunicorn instead of Django development server</li>
                        <li>Configure Nginx as reverse proxy</li>
                        <li>Enable SSL/TLS certificates</li>
                        <li>Set up backup strategy for PostgreSQL</li>
                        <li>Configure monitoring (Prometheus, Grafana)</li>
                        <li>Enable log aggregation (ELK stack, CloudWatch)</li>
                    </ul>
                </div>
            </section>

            <!-- Troubleshooting Section -->
            <section id="troubleshooting">
                <h2>Troubleshooting</h2>
                
                <div class="card">
                    <h3>Common Issues</h3>
                    
                    <h4>Database Connection Errors</h4>
                    <pre><code># Error: connection to server failed
# Solution: Check PostgreSQL is running
sudo systemctl status postgresql
sudo systemctl start postgresql

# Check connection
psql -U rto_user -d rto_tas_db</code></pre>

                    <h4>Migration Errors</h4>
                    <pre><code># Error: relation already exists
# Solution: Fake the migration
python manage.py migrate --fake tas 0001

# Or reset migrations (development only)
python manage.py migrate tas zero
python manage.py migrate tas</code></pre>

                    <h4>OpenAI API Errors</h4>
                    <pre><code># Error: Invalid API key
# Solution: Verify key in .env
echo $OPENAI_API_KEY

# Test API directly
curl https://api.openai.com/v1/models \
  -H "Authorization: Bearer $OPENAI_API_KEY"</code></pre>

                    <h4>Port Already in Use</h4>
                    <pre><code># Error: Port 8000 already in use
# Solution: Find and kill process
lsof -ti:8000 | xargs kill -9

# Or use different port
python manage.py runserver 8001</code></pre>
                </div>

                <div class="card">
                    <h3>Enable Debug Logging</h3>
                    <pre><code># In settings.py or .env
DJANGO_DEBUG=True
LOG_LEVEL=DEBUG

# View detailed logs
tail -f logs/django.log

# Or in Docker
docker-compose logs -f --tail=100 control-plane</code></pre>
                </div>

                <div class="card">
                    <h3>Get Help</h3>
                    <ul>
                        <li>üìß Email support: support@yourdomain.com</li>
                        <li>üí¨ Slack channel: #tas-generator-support</li>
                        <li>üìñ Documentation: <a href="https://docs.yourdomain.com">docs.yourdomain.com</a></li>
                        <li>üêõ Report bugs: <a href="https://github.com/your-org/rtocomply-ai-backend/issues">GitHub Issues</a></li>
                    </ul>
                </div>
            </section>

            <!-- Next Steps -->
            <section id="next-steps">
                <h2>Next Steps</h2>
                
                <div class="alert alert-success">
                    <strong>üéâ Congratulations!</strong> Your TAS Generator is now set up and ready to use.
                </div>

                <div class="card">
                    <h3>Recommended Next Actions</h3>
                    <ol>
                        <li>üìñ <a href="models-structure.html">Learn about the Data Models</a></li>
                        <li>üîß <a href="api-reference.html">Explore the API endpoints</a></li>
                        <li>ü§ñ <a href="ai-services-setup.html">Configure AI Services</a></li>
                        <li>üìã <a href="template-configuration.html">Set up TAS Templates</a></li>
                        <li>üíº <a href="examples.html">Try example workflows</a></li>
                    </ol>
                </div>
            </section>
        </main>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 EduAI Compliance Suite - TAS Generator Documentation</p>
            <p>Version 1.0.0 | Last Updated: November 2025</p>
        </div>
    </footer>

    <script src="js/app.js"></script>
</body>
</html>
