# Generated by Django 5.1.2 on 2025-10-24 11:41

import django.db.models.deletion
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='ComplianceCheck',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('check_id', models.CharField(editable=False, max_length=50, unique=True)),
                ('tenant', models.CharField(max_length=100)),
                ('check_type', models.CharField(default='full_matrix', max_length=50)),
                ('check_status', models.CharField(choices=[('pending', 'Pending'), ('running', 'Running'), ('completed', 'Completed'), ('failed', 'Failed')], default='pending', max_length=20)),
                ('trainer_ids', models.JSONField(default=list)),
                ('unit_codes', models.JSONField(default=list)),
                ('total_assignments_checked', models.IntegerField(default=0)),
                ('compliant_assignments', models.IntegerField(default=0)),
                ('non_compliant_assignments', models.IntegerField(default=0)),
                ('gaps_found', models.IntegerField(default=0)),
                ('critical_gaps', models.IntegerField(default=0)),
                ('high_gaps', models.IntegerField(default=0)),
                ('medium_gaps', models.IntegerField(default=0)),
                ('low_gaps', models.IntegerField(default=0)),
                ('overall_compliance_score', models.FloatField(default=0.0)),
                ('report_summary', models.TextField(blank=True)),
                ('detailed_results', models.JSONField(default=dict)),
                ('recommendations', models.JSONField(default=list)),
                ('started_at', models.DateTimeField(blank=True, null=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('execution_time_seconds', models.FloatField(blank=True, null=True)),
                ('error_message', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'indexes': [models.Index(fields=['tenant', 'check_status'], name='competency__tenant_572a8d_idx'), models.Index(fields=['created_at'], name='competency__created_b597e6_idx')],
            },
        ),
        migrations.CreateModel(
            name='QualificationMapping',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('mapping_id', models.CharField(editable=False, max_length=50, unique=True)),
                ('tenant', models.CharField(max_length=100)),
                ('source_qualification_code', models.CharField(max_length=50)),
                ('source_qualification_name', models.CharField(max_length=300)),
                ('competency_areas', models.JSONField(default=list)),
                ('match_strength', models.FloatField(default=0.0)),
                ('match_confidence', models.FloatField(default=0.0)),
                ('equivalent_qualifications', models.JSONField(default=list)),
                ('superseded_by', models.CharField(blank=True, max_length=50)),
                ('supersedes', models.CharField(blank=True, max_length=50)),
                ('units_covered', models.JSONField(default=list)),
                ('units_partially_covered', models.JSONField(default=list)),
                ('mapping_source', models.CharField(default='manual', max_length=100)),
                ('verified', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'indexes': [models.Index(fields=['tenant', 'source_qualification_code'], name='competency__tenant_403d48_idx'), models.Index(fields=['match_strength'], name='competency__match_s_8bf687_idx')],
                'unique_together': {('tenant', 'source_qualification_code')},
            },
        ),
        migrations.CreateModel(
            name='TrainerQualification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('qualification_id', models.CharField(editable=False, max_length=50, unique=True)),
                ('tenant', models.CharField(max_length=100)),
                ('trainer_id', models.CharField(max_length=100)),
                ('trainer_name', models.CharField(max_length=200)),
                ('qualification_type', models.CharField(choices=[('certificate_iii', 'Certificate III'), ('certificate_iv', 'Certificate IV'), ('diploma', 'Diploma'), ('advanced_diploma', 'Advanced Diploma'), ('bachelor', 'Bachelor Degree'), ('master', 'Master Degree'), ('tae_cert_iv', 'TAE40116/TAE40122'), ('industry_cert', 'Industry Certification'), ('other', 'Other')], max_length=50)),
                ('qualification_code', models.CharField(max_length=50)),
                ('qualification_name', models.CharField(max_length=300)),
                ('issuing_organization', models.CharField(max_length=200)),
                ('date_obtained', models.DateField()),
                ('expiry_date', models.DateField(blank=True, null=True)),
                ('verification_status', models.CharField(choices=[('verified', 'Verified'), ('pending', 'Pending Verification'), ('expired', 'Expired'), ('not_verified', 'Not Verified')], default='pending', max_length=20)),
                ('verification_document', models.CharField(blank=True, max_length=500)),
                ('competency_areas', models.JSONField(default=list)),
                ('units_covered', models.JSONField(default=list)),
                ('industry_experience_years', models.IntegerField(default=0)),
                ('recent_industry_work', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'indexes': [models.Index(fields=['tenant', 'trainer_id'], name='competency__tenant_f4663c_idx'), models.Index(fields=['verification_status', 'expiry_date'], name='competency__verific_8ab3f1_idx'), models.Index(fields=['qualification_code'], name='competency__qualifi_cdf40c_idx')],
                'unique_together': {('tenant', 'trainer_id', 'qualification_code')},
            },
        ),
        migrations.CreateModel(
            name='UnitOfCompetency',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('unit_id', models.CharField(editable=False, max_length=50, unique=True)),
                ('tenant', models.CharField(max_length=100)),
                ('unit_code', models.CharField(max_length=50)),
                ('unit_name', models.CharField(max_length=300)),
                ('unit_type', models.CharField(choices=[('core', 'Core Unit'), ('elective', 'Elective Unit'), ('prerequisite', 'Prerequisite')], max_length=20)),
                ('qualification_code', models.CharField(max_length=50)),
                ('required_qualifications', models.JSONField(default=list)),
                ('required_competency_areas', models.JSONField(default=list)),
                ('required_industry_experience', models.IntegerField(default=0)),
                ('requires_tae', models.BooleanField(default=True)),
                ('requires_industry_currency', models.BooleanField(default=True)),
                ('learning_outcomes', models.JSONField(default=list)),
                ('assessment_methods', models.JSONField(default=list)),
                ('technical_skills', models.JSONField(default=list)),
                ('prerequisite_units', models.JSONField(default=list)),
                ('related_units', models.JSONField(default=list)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'indexes': [models.Index(fields=['tenant', 'qualification_code'], name='competency__tenant_25f80c_idx'), models.Index(fields=['unit_code'], name='competency__unit_co_504ac9_idx')],
                'unique_together': {('tenant', 'unit_code')},
            },
        ),
        migrations.CreateModel(
            name='TrainerAssignment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('assignment_id', models.CharField(editable=False, max_length=50, unique=True)),
                ('tenant', models.CharField(max_length=100)),
                ('trainer_id', models.CharField(max_length=100)),
                ('trainer_name', models.CharField(max_length=200)),
                ('assignment_status', models.CharField(choices=[('approved', 'Approved'), ('pending', 'Pending Approval'), ('rejected', 'Rejected'), ('under_review', 'Under Review')], default='pending', max_length=20)),
                ('assigned_date', models.DateField(auto_now_add=True)),
                ('approved_by', models.CharField(blank=True, max_length=200)),
                ('approved_date', models.DateField(blank=True, null=True)),
                ('meets_requirements', models.BooleanField(default=False)),
                ('compliance_score', models.FloatField(default=0.0)),
                ('gaps_identified', models.JSONField(default=list)),
                ('matching_qualifications', models.JSONField(default=list)),
                ('assignment_notes', models.TextField(blank=True)),
                ('rejection_reason', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('unit', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='assignments', to='competency_gap.unitofcompetency')),
            ],
        ),
        migrations.CreateModel(
            name='CompetencyGap',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('gap_id', models.CharField(editable=False, max_length=50, unique=True)),
                ('tenant', models.CharField(max_length=100)),
                ('trainer_id', models.CharField(max_length=100)),
                ('trainer_name', models.CharField(max_length=200)),
                ('gap_type', models.CharField(choices=[('missing_qualification', 'Missing Required Qualification'), ('expired_qualification', 'Expired Qualification'), ('insufficient_experience', 'Insufficient Industry Experience'), ('missing_tae', 'Missing TAE Qualification'), ('missing_currency', 'Missing Industry Currency'), ('competency_mismatch', 'Competency Area Mismatch'), ('skill_gap', 'Technical Skill Gap')], max_length=50)),
                ('gap_severity', models.CharField(choices=[('critical', 'Critical - Cannot Deliver'), ('high', 'High - Requires Upskilling'), ('medium', 'Medium - Recommended Upskilling'), ('low', 'Low - Minor Gap')], max_length=20)),
                ('gap_description', models.TextField()),
                ('required_qualification', models.CharField(blank=True, max_length=100)),
                ('required_competency', models.CharField(blank=True, max_length=200)),
                ('required_experience_years', models.IntegerField(blank=True, null=True)),
                ('current_qualifications', models.JSONField(default=list)),
                ('is_resolved', models.BooleanField(default=False)),
                ('resolution_date', models.DateField(blank=True, null=True)),
                ('resolution_notes', models.TextField(blank=True)),
                ('recommended_action', models.TextField()),
                ('estimated_resolution_time', models.CharField(blank=True, max_length=100)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('assignment', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='gaps', to='competency_gap.trainerassignment')),
                ('unit', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='gaps', to='competency_gap.unitofcompetency')),
            ],
        ),
        migrations.AddIndex(
            model_name='trainerassignment',
            index=models.Index(fields=['tenant', 'trainer_id'], name='competency__tenant_874adc_idx'),
        ),
        migrations.AddIndex(
            model_name='trainerassignment',
            index=models.Index(fields=['assignment_status'], name='competency__assignm_cdacef_idx'),
        ),
        migrations.AddIndex(
            model_name='trainerassignment',
            index=models.Index(fields=['unit', 'trainer_id'], name='competency__unit_id_00665f_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='trainerassignment',
            unique_together={('tenant', 'trainer_id', 'unit')},
        ),
        migrations.AddIndex(
            model_name='competencygap',
            index=models.Index(fields=['tenant', 'trainer_id'], name='competency__tenant_e07b54_idx'),
        ),
        migrations.AddIndex(
            model_name='competencygap',
            index=models.Index(fields=['gap_severity', 'is_resolved'], name='competency__gap_sev_c3bb20_idx'),
        ),
        migrations.AddIndex(
            model_name='competencygap',
            index=models.Index(fields=['unit'], name='competency__unit_id_81f98a_idx'),
        ),
    ]
