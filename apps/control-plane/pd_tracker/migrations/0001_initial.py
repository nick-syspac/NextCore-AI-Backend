# Generated by Django 5.1.2 on 2025-10-24 07:28

import django.db.models.deletion
import django.utils.timezone
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='ComplianceRule',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('rule_number', models.CharField(db_index=True, max_length=50, unique=True)),
                ('tenant', models.CharField(db_index=True, max_length=100)),
                ('rule_name', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('regulatory_source', models.CharField(choices=[('asqa', 'ASQA Standards'), ('vet_quality', 'VET Quality Framework'), ('state_regulation', 'State Regulation'), ('rto_policy', 'RTO Policy'), ('industry_requirement', 'Industry Requirement')], max_length=50)),
                ('reference_code', models.CharField(blank=True, max_length=100)),
                ('applies_to_roles', models.JSONField(default=list)),
                ('applies_to_sectors', models.JSONField(default=list)),
                ('applies_to_qualifications', models.JSONField(default=list)),
                ('requirement_type', models.CharField(choices=[('minimum_hours', 'Minimum Hours Required'), ('activity_type', 'Specific Activity Type'), ('frequency', 'Frequency Requirement'), ('industry_engagement', 'Industry Engagement'), ('qualification_maintenance', 'Qualification Maintenance')], max_length=50)),
                ('requirement_details', models.JSONField(default=dict)),
                ('is_active', models.BooleanField(default=True)),
                ('effective_date', models.DateField(default=django.utils.timezone.now)),
                ('expiry_date', models.DateField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'ordering': ['regulatory_source', 'rule_name'],
            },
        ),
        migrations.CreateModel(
            name='TrainerProfile',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('profile_number', models.CharField(db_index=True, max_length=50, unique=True)),
                ('tenant', models.CharField(db_index=True, max_length=100)),
                ('trainer_id', models.CharField(db_index=True, max_length=100, unique=True)),
                ('trainer_name', models.CharField(max_length=200)),
                ('email', models.EmailField(max_length=254)),
                ('role', models.CharField(max_length=100)),
                ('department', models.CharField(blank=True, max_length=200)),
                ('employment_start_date', models.DateField(blank=True, null=True)),
                ('highest_qualification', models.CharField(blank=True, max_length=200)),
                ('teaching_qualifications', models.JSONField(default=list)),
                ('industry_qualifications', models.JSONField(default=list)),
                ('teaching_subjects', models.JSONField(default=list)),
                ('teaching_qualification_levels', models.JSONField(default=list)),
                ('industry_sectors', models.JSONField(default=list)),
                ('vocational_currency_required', models.BooleanField(default=True)),
                ('industry_currency_required', models.BooleanField(default=True)),
                ('teaching_currency_required', models.BooleanField(default=True)),
                ('total_pd_hours', models.FloatField(default=0.0)),
                ('vocational_pd_hours', models.FloatField(default=0.0)),
                ('industry_pd_hours', models.FloatField(default=0.0)),
                ('teaching_pd_hours', models.FloatField(default=0.0)),
                ('last_vocational_pd', models.DateField(blank=True, null=True)),
                ('last_industry_pd', models.DateField(blank=True, null=True)),
                ('last_teaching_pd', models.DateField(blank=True, null=True)),
                ('vocational_currency_status', models.CharField(choices=[('current', 'Current'), ('expiring_soon', 'Expiring Soon'), ('expired', 'Expired'), ('not_applicable', 'Not Applicable')], default='current', max_length=20)),
                ('industry_currency_status', models.CharField(choices=[('current', 'Current'), ('expiring_soon', 'Expiring Soon'), ('expired', 'Expired'), ('not_applicable', 'Not Applicable')], default='current', max_length=20)),
                ('meets_asqa_requirements', models.BooleanField(default=True)),
                ('last_compliance_check', models.DateField(blank=True, null=True)),
                ('compliance_issues', models.JSONField(default=list)),
                ('annual_pd_goal_hours', models.FloatField(default=20.0)),
                ('current_year_hours', models.FloatField(default=0.0)),
                ('pd_goals', models.JSONField(default=list)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'ordering': ['trainer_name'],
            },
        ),
        migrations.CreateModel(
            name='PDActivity',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('activity_number', models.CharField(db_index=True, max_length=50, unique=True)),
                ('tenant', models.CharField(db_index=True, max_length=100)),
                ('trainer_id', models.CharField(db_index=True, max_length=100)),
                ('trainer_name', models.CharField(max_length=200)),
                ('trainer_role', models.CharField(blank=True, max_length=100)),
                ('department', models.CharField(blank=True, max_length=200)),
                ('activity_type', models.CharField(choices=[('formal_course', 'Formal Course/Training'), ('workshop', 'Workshop/Seminar'), ('conference', 'Conference/Symposium'), ('webinar', 'Webinar/Online Session'), ('industry_placement', 'Industry Placement'), ('networking', 'Professional Networking'), ('research', 'Research/Publication'), ('mentoring', 'Mentoring/Coaching'), ('self_study', 'Self-Directed Study'), ('certification', 'Certification/Qualification'), ('teaching_observation', 'Teaching Observation'), ('curriculum_development', 'Curriculum Development')], max_length=50)),
                ('activity_title', models.CharField(max_length=300)),
                ('description', models.TextField()),
                ('provider', models.CharField(blank=True, max_length=200)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('hours_completed', models.FloatField(default=0.0)),
                ('compliance_areas', models.JSONField(default=list)),
                ('industry_sectors', models.JSONField(default=list)),
                ('qualification_levels', models.JSONField(default=list)),
                ('evidence_type', models.CharField(blank=True, choices=[('certificate', 'Certificate/Statement of Attainment'), ('attendance_record', 'Attendance Record'), ('transcript', 'Academic Transcript'), ('letter', 'Letter of Completion'), ('portfolio', 'Portfolio/Work Samples'), ('statutory_declaration', 'Statutory Declaration'), ('other', 'Other Documentation')], max_length=50)),
                ('evidence_files', models.JSONField(default=list)),
                ('verification_status', models.CharField(choices=[('pending', 'Pending Verification'), ('verified', 'Verified'), ('rejected', 'Rejected'), ('expired', 'Expired')], default='pending', max_length=20)),
                ('verified_by', models.CharField(blank=True, max_length=200)),
                ('verified_date', models.DateField(blank=True, null=True)),
                ('learning_outcomes', models.TextField(blank=True)),
                ('application_to_practice', models.TextField(blank=True)),
                ('reflection_notes', models.TextField(blank=True)),
                ('maintains_vocational_currency', models.BooleanField(default=False)),
                ('maintains_industry_currency', models.BooleanField(default=False)),
                ('maintains_teaching_currency', models.BooleanField(default=False)),
                ('meets_asqa_requirements', models.BooleanField(default=False)),
                ('compliance_notes', models.TextField(blank=True)),
                ('status', models.CharField(choices=[('planned', 'Planned'), ('in_progress', 'In Progress'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], default='planned', max_length=20)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'ordering': ['-start_date'],
                'indexes': [models.Index(fields=['tenant', 'trainer_id', '-start_date'], name='pd_tracker__tenant_f70ff4_idx'), models.Index(fields=['status', 'verification_status'], name='pd_tracker__status_210ae4_idx'), models.Index(fields=['activity_type', '-start_date'], name='pd_tracker__activit_381ba1_idx')],
            },
        ),
        migrations.CreateModel(
            name='PDSuggestion',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('suggestion_number', models.CharField(db_index=True, max_length=50, unique=True)),
                ('suggested_activity_type', models.CharField(max_length=50)),
                ('activity_title', models.CharField(max_length=300)),
                ('description', models.TextField()),
                ('rationale', models.TextField()),
                ('addresses_currency_gap', models.CharField(choices=[('vocational', 'Vocational Currency'), ('industry', 'Industry Currency'), ('teaching', 'Teaching Currency'), ('compliance', 'Compliance Requirement'), ('skill_development', 'Skill Development'), ('career_progression', 'Career Progression')], max_length=50)),
                ('priority_level', models.CharField(choices=[('critical', 'Critical - Compliance Risk'), ('high', 'High Priority'), ('medium', 'Medium Priority'), ('low', 'Low Priority')], default='medium', max_length=20)),
                ('suggested_providers', models.JSONField(default=list)),
                ('estimated_hours', models.FloatField(blank=True, null=True)),
                ('estimated_cost', models.FloatField(blank=True, null=True)),
                ('suggested_timeframe', models.CharField(blank=True, max_length=100)),
                ('deadline', models.DateField(blank=True, null=True)),
                ('generated_by_model', models.CharField(blank=True, max_length=100)),
                ('generation_date', models.DateTimeField(auto_now_add=True)),
                ('prompt_used', models.TextField(blank=True)),
                ('confidence_score', models.FloatField(blank=True, null=True)),
                ('status', models.CharField(choices=[('pending_review', 'Pending Review'), ('accepted', 'Accepted'), ('planned', 'Planned'), ('in_progress', 'In Progress'), ('completed', 'Completed'), ('dismissed', 'Dismissed')], default='pending_review', max_length=20)),
                ('trainer_feedback', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('linked_activity', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='pd_tracker.pdactivity')),
                ('trainer_profile', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='pd_suggestions', to='pd_tracker.trainerprofile')),
            ],
            options={
                'ordering': ['-priority_level', '-generation_date'],
            },
        ),
        migrations.CreateModel(
            name='ComplianceCheck',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('check_number', models.CharField(db_index=True, max_length=50, unique=True)),
                ('check_date', models.DateField(default=django.utils.timezone.now)),
                ('check_period_start', models.DateField()),
                ('check_period_end', models.DateField()),
                ('checked_by', models.CharField(blank=True, max_length=200)),
                ('overall_status', models.CharField(choices=[('compliant', 'Fully Compliant'), ('at_risk', 'At Risk'), ('non_compliant', 'Non-Compliant')], max_length=20)),
                ('rules_checked', models.JSONField(default=list)),
                ('rules_met', models.JSONField(default=list)),
                ('rules_not_met', models.JSONField(default=list)),
                ('compliance_score', models.FloatField(default=0.0)),
                ('hours_required', models.FloatField(default=0.0)),
                ('hours_completed', models.FloatField(default=0.0)),
                ('hours_shortfall', models.FloatField(default=0.0)),
                ('findings', models.JSONField(default=list)),
                ('recommendations', models.JSONField(default=list)),
                ('requires_action', models.BooleanField(default=False)),
                ('action_deadline', models.DateField(blank=True, null=True)),
                ('actions_taken', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('trainer_profile', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='compliance_checks', to='pd_tracker.trainerprofile')),
            ],
            options={
                'ordering': ['-check_date'],
            },
        ),
    ]
